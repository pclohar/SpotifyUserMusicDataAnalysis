{"ast":null,"code":"var _jsxFileName = \"/Volumes/Documents/SPOTIFY API/spotify-web-api/client/src/Components/Login.js\";\nimport React from 'react';\nimport Redirect from '../common/Redirect';\nimport { getLoginRedirect, registerSpotify } from '../util/auth';\nimport { getUrlParams } from '../util/url';\nimport { Button } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { getTopSongs, getRecentSongs } from '../util/songs';\n\nconst useStyles = theme => ({\n  btnLogin: {\n    //background : '#3ec247',\n    marginTop: '25%',\n    marginLeft: '43%',\n    width: '200px'\n  }\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.redirectToSpotify = async () => {\n      const redirect = await getLoginRedirect();\n      this.setState({\n        redirectUrl: redirect\n      });\n    };\n\n    this.state = {\n      redirectUrl: ''\n    };\n  }\n\n  async componentDidMount() {\n    let top_songs = {};\n    let recent_songs = {};\n    const params = getUrlParams();\n    const code = params.code || null;\n    const {\n      setUserInfo,\n      history,\n      userInfo,\n      setTopSongs,\n      setRecentSongs\n    } = this.props;\n\n    if (userInfo.id) {\n      top_songs = await getTopSongs();\n      setTopSongs(top_songs);\n      recent_songs = await getRecentSongs();\n      setRecentSongs(recent_songs);\n      history.push('/');\n      return;\n    }\n\n    ;\n    if (!code) return;\n    const user = await registerSpotify(code);\n    setUserInfo(user);\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n\n    if (this.state.redirectUrl) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        url: this.state.redirectUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: classes.btnLogin,\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.redirectToSpotify,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, \"Login with Spotify\"));\n  }\n\n}\n\nexport default withStyles(useStyles)(Login);","map":{"version":3,"sources":["/Volumes/Documents/SPOTIFY API/spotify-web-api/client/src/Components/Login.js"],"names":["React","Redirect","getLoginRedirect","registerSpotify","getUrlParams","Button","withStyles","getTopSongs","getRecentSongs","useStyles","theme","btnLogin","marginTop","marginLeft","width","Login","Component","constructor","props","redirectToSpotify","redirect","setState","redirectUrl","state","componentDidMount","top_songs","recent_songs","params","code","setUserInfo","history","userInfo","setTopSongs","setRecentSongs","id","push","user","render","classes"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,SAASC,gBAAT,EAA2BC,eAA3B,QAAkD,cAAlD;AACA,SAASC,YAAT,QAA6B,aAA7B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,WAAT,EAAsBC,cAAtB,QAA4C,eAA5C;;AAEA,MAAMC,SAAS,GAAGC,KAAK,KAAK;AAC1BC,EAAAA,QAAQ,EAAE;AACR;AACAC,IAAAA,SAAS,EAAG,KAFJ;AAGRC,IAAAA,UAAU,EAAE,KAHJ;AAIRC,IAAAA,KAAK,EAAE;AAJC;AADgB,CAAL,CAAvB;;AASA,MAAMC,KAAN,SAAoBf,KAAK,CAACgB,SAA1B,CAAoC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACb,UAAMA,KAAN;;AADa,SAMnBC,iBANmB,GAMC,YAAY;AAC9B,YAAMC,QAAQ,GAAG,MAAMlB,gBAAgB,EAAvC;AACA,WAAKmB,QAAL,CAAc;AAAEC,QAAAA,WAAW,EAAEF;AAAf,OAAd;AACD,KATkB;;AAEb,SAAKG,KAAL,GAAa;AAAED,MAAAA,WAAW,EAAE;AAAf,KAAb;AAEH;;AAOH,QAAME,iBAAN,GAA0B;AACxB,QAAIC,SAAS,GAAG,EAAhB;AACA,QAAIC,YAAY,GAAG,EAAnB;AACA,UAAMC,MAAM,GAAGvB,YAAY,EAA3B;AACA,UAAMwB,IAAI,GAAGD,MAAM,CAACC,IAAP,IAAe,IAA5B;AACA,UAAM;AAAEC,MAAAA,WAAF;AAAeC,MAAAA,OAAf;AAAwBC,MAAAA,QAAxB;AAAkCC,MAAAA,WAAlC;AAA+CC,MAAAA;AAA/C,QAAiE,KAAKf,KAA5E;;AAEA,QAAIa,QAAQ,CAACG,EAAb,EAAiB;AACfT,MAAAA,SAAS,GAAG,MAAMlB,WAAW,EAA7B;AACAyB,MAAAA,WAAW,CAACP,SAAD,CAAX;AACAC,MAAAA,YAAY,GAAG,MAAMlB,cAAc,EAAnC;AACAyB,MAAAA,cAAc,CAACP,YAAD,CAAd;AACAI,MAAAA,OAAO,CAACK,IAAR,CAAa,GAAb;AACA;AACD;;AAAA;AACD,QAAI,CAACP,IAAL,EAAW;AAEX,UAAMQ,IAAI,GAAG,MAAMjC,eAAe,CAACyB,IAAD,CAAlC;AACAC,IAAAA,WAAW,CAACO,IAAD,CAAX;AAGD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AAACC,MAAAA;AAAD,QAAY,KAAKpB,KAAvB;;AAEA,QAAI,KAAKK,KAAL,CAAWD,WAAf,EAA4B;AAC1B,0BAAO,oBAAC,QAAD;AAAU,QAAA,GAAG,EAAE,KAAKC,KAAL,CAAWD,WAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;;AAED,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACM,oBAAC,MAAD;AAAQ,MAAA,SAAS,EAAIgB,OAAO,CAAC3B,QAA7B;AAAuC,MAAA,OAAO,EAAC,WAA/C;AAA2D,MAAA,KAAK,EAAC,SAAjE;AAA2E,MAAA,OAAO,EAAE,KAAKQ,iBAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADN,CADF;AAKD;;AA/CiC;;AAmDpC,eAAeb,UAAU,CAACG,SAAD,CAAV,CAAsBM,KAAtB,CAAf","sourcesContent":["import React from 'react';\nimport Redirect from '../common/Redirect';\nimport { getLoginRedirect, registerSpotify } from '../util/auth';\nimport { getUrlParams } from '../util/url';\nimport { Button } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { getTopSongs, getRecentSongs } from '../util/songs';\n\nconst useStyles = theme => ({\n  btnLogin: {\n    //background : '#3ec247',\n    marginTop : '25%',\n    marginLeft: '43%',\n    width: '200px'\n  }\n});\n\nclass Login extends React.Component {\n  constructor(props) {\n        super(props);\n        this.state = { redirectUrl: '' };\n\n    };\n\n  redirectToSpotify = async () => {\n    const redirect = await getLoginRedirect();\n    this.setState({ redirectUrl: redirect });\n  }\n\n  async componentDidMount() {\n    let top_songs = {};\n    let recent_songs = {};\n    const params = getUrlParams();\n    const code = params.code || null;\n    const { setUserInfo, history, userInfo, setTopSongs, setRecentSongs} = this.props;\n\n    if (userInfo.id) {\n      top_songs = await getTopSongs();\n      setTopSongs(top_songs);\n      recent_songs = await getRecentSongs();\n      setRecentSongs(recent_songs);\n      history.push('/');\n      return;\n    };\n    if (!code) return;\n\n    const user = await registerSpotify(code);\n    setUserInfo(user);\n\n    \n  }\n\n  render() {\n    const {classes} = this.props;\n    \n    if (this.state.redirectUrl) {\n      return <Redirect url={this.state.redirectUrl} />\n    }\n\n    return (\n      <div>\n            <Button className = {classes.btnLogin} variant=\"contained\" color=\"primary\" onClick={this.redirectToSpotify}>Login with Spotify</Button>\n      </div>\n    );\n  }\n}\n \n\nexport default withStyles(useStyles)(Login);"]},"metadata":{},"sourceType":"module"}